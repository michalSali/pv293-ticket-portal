TODO: add full architecture description